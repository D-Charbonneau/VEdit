{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\boome\\\\Desktop\\\\vedit\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\boome\\\\Desktop\\\\vedit\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useContext}from\"react\";import{Account}from\"../../components/protected/account\";import{GlobalContext}from\"../../contexts/globalContext\";import API from\"../../dataLayer/api\";import{jsx as _jsx}from\"react/jsx-runtime\";export function AccountView(){var state=useContext(GlobalContext);var handleUsernameChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var _state$state$user;var _state$state$user2,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!((_state$state$user=state.state.user)!==null&&_state$state$user!==void 0&&_state$state$user.pass)){_context.next=5;break;}_context.next=3;return API.changeUsername((_state$state$user2=state.state.user)===null||_state$state$user2===void 0?void 0:_state$state$user2.pass,values.username,values.confirmusername);case 3:result=_context.sent;if(result.status===\"success\"&&state.refreshData!==undefined){state.refreshData(result.data.message);}case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleUsernameChange(_x){return _ref.apply(this,arguments);};}();var handlePasswordChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values){var _state$state$user3;var _state$state$user4,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!((_state$state$user3=state.state.user)!==null&&_state$state$user3!==void 0&&_state$state$user3.id)){_context2.next=5;break;}_context2.next=3;return API.changePassword((_state$state$user4=state.state.user)===null||_state$state$user4===void 0?void 0:_state$state$user4.id,values.oldpassword,values.password,values.confirmpassword);case 3:result=_context2.sent;if(result.status===\"success\"&&state.refreshData!==undefined){state.refreshData(result.data.message);}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handlePasswordChange(_x2){return _ref2.apply(this,arguments);};}();var handlePFPChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(values){var _state$state$user5;var _state$state$user6,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!((_state$state$user5=state.state.user)!==null&&_state$state$user5!==void 0&&_state$state$user5.id)){_context3.next=5;break;}_context3.next=3;return API.changePFP((_state$state$user6=state.state.user)===null||_state$state$user6===void 0?void 0:_state$state$user6.id,values.pfp);case 3:result=_context3.sent;if(result.status===\"success\"&&state.refreshData!==undefined){state.refreshData(result.data.message);}case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handlePFPChange(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Account,{usernameHandler:handleUsernameChange,passwordHandler:handlePasswordChange,pfpHandler:handlePFPChange});}","map":{"version":3,"sources":["C:/Users/boome/Desktop/vedit/src/views/protected/account.view.tsx"],"names":["useContext","Account","GlobalContext","API","AccountView","state","handleUsernameChange","values","user","pass","changeUsername","username","confirmusername","result","status","refreshData","undefined","data","message","handlePasswordChange","id","changePassword","oldpassword","password","confirmpassword","handlePFPChange","changePFP","pfp"],"mappings":"0PAAA,OAASA,UAAT,KAA2B,OAA3B,CACA,OAASC,OAAT,KAAiG,oCAAjG,CACA,OAASC,aAAT,KAA8B,8BAA9B,CACA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,C,2CAEA,MAAO,SAASC,CAAAA,WAAT,EACP,CACI,GAAMC,CAAAA,KAAK,CAAGL,UAAU,CAACE,aAAD,CAAxB,CACA,GAAMI,CAAAA,oBAAoB,0FAAG,iBAAOC,MAAP,8LAErBF,KAAK,CAACA,KAAN,CAAYG,IAFS,sCAErB,kBAAkBC,IAFG,gDAIFN,CAAAA,GAAG,CAACO,cAAJ,qBAAmBL,KAAK,CAACA,KAAN,CAAYG,IAA/B,6CAAmB,mBAAkBC,IAArC,CAA2CF,MAAM,CAACI,QAAlD,CAA4DJ,MAAM,CAACK,eAAnE,CAJE,QAIjBC,MAJiB,eAKrB,GAAIA,MAAM,CAACC,MAAP,GAAkB,SAAlB,EAA+BT,KAAK,CAACU,WAAN,GAAsBC,SAAzD,CACA,CACIX,KAAK,CAACU,WAAN,CAAkBF,MAAM,CAACI,IAAP,CAAYC,OAA9B,EACH,CARoB,sDAAH,kBAApBZ,CAAAA,oBAAoB,4CAA1B,CAYA,GAAMa,CAAAA,oBAAoB,2FAAG,kBAAOZ,MAAP,oMAErBF,KAAK,CAACA,KAAN,CAAYG,IAFS,uCAErB,mBAAkBY,EAFG,kDAIFjB,CAAAA,GAAG,CAACkB,cAAJ,qBAAmBhB,KAAK,CAACA,KAAN,CAAYG,IAA/B,6CAAmB,mBAAkBY,EAArC,CAAyCb,MAAM,CAACe,WAAhD,CAA6Df,MAAM,CAACgB,QAApE,CAA8EhB,MAAM,CAACiB,eAArF,CAJE,QAIjBX,MAJiB,gBAKrB,GAAIA,MAAM,CAACC,MAAP,GAAkB,SAAlB,EAA+BT,KAAK,CAACU,WAAN,GAAsBC,SAAzD,CACA,CACIX,KAAK,CAACU,WAAN,CAAkBF,MAAM,CAACI,IAAP,CAAYC,OAA9B,EACH,CARoB,wDAAH,kBAApBC,CAAAA,oBAAoB,8CAA1B,CAYA,GAAMM,CAAAA,eAAe,2FAAG,kBAAOlB,MAAP,oMAEhBF,KAAK,CAACA,KAAN,CAAYG,IAFI,uCAEhB,mBAAkBY,EAFF,kDAIGjB,CAAAA,GAAG,CAACuB,SAAJ,qBAAcrB,KAAK,CAACA,KAAN,CAAYG,IAA1B,6CAAc,mBAAkBY,EAAhC,CAAoCb,MAAM,CAACoB,GAA3C,CAJH,QAIZd,MAJY,gBAKhB,GAAIA,MAAM,CAACC,MAAP,GAAkB,SAAlB,EAA+BT,KAAK,CAACU,WAAN,GAAsBC,SAAzD,CACA,CACIX,KAAK,CAACU,WAAN,CAAkBF,MAAM,CAACI,IAAP,CAAYC,OAA9B,EACH,CARe,wDAAH,kBAAfO,CAAAA,eAAe,8CAArB,CAYA,mBAAO,KAAC,OAAD,EAAS,eAAe,CAAEnB,oBAA1B,CAAgD,eAAe,CAAEa,oBAAjE,CAAuF,UAAU,CAAEM,eAAnG,EAAP,CACH","sourcesContent":["import { useContext } from \"react\";\r\nimport { Account, PasswordChangeFormValues, PFPChangeFormValues, UsernameChangeFormValues } from \"../../components/protected/account\";\r\nimport { GlobalContext } from \"../../contexts/globalContext\";\r\nimport API from \"../../dataLayer/api\";\r\n\r\nexport function AccountView()\r\n{\r\n    const state = useContext(GlobalContext);\r\n    const handleUsernameChange = async (values: UsernameChangeFormValues) =>\r\n    {\r\n        if (state.state.user?.pass)\r\n        {\r\n            let result = await API.changeUsername(state.state.user?.pass, values.username, values.confirmusername);\r\n            if (result.status === \"success\" && state.refreshData !== undefined)\r\n            {\r\n                state.refreshData(result.data.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    const handlePasswordChange = async (values: PasswordChangeFormValues) =>\r\n    {\r\n        if (state.state.user?.id)\r\n        {\r\n            let result = await API.changePassword(state.state.user?.id, values.oldpassword, values.password, values.confirmpassword);\r\n            if (result.status === \"success\" && state.refreshData !== undefined)\r\n            {\r\n                state.refreshData(result.data.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    const handlePFPChange = async (values: PFPChangeFormValues) =>\r\n    {\r\n        if (state.state.user?.id)\r\n        {\r\n            let result = await API.changePFP(state.state.user?.id, values.pfp);\r\n            if (result.status === \"success\" && state.refreshData !== undefined)\r\n            {\r\n                state.refreshData(result.data.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    return <Account usernameHandler={handleUsernameChange} passwordHandler={handlePasswordChange} pfpHandler={handlePFPChange} />;\r\n}"]},"metadata":{},"sourceType":"module"}